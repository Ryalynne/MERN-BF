{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Documents\\\\PROGRAMMING\\\\New folder\\\\MERN-BF\\\\frontend\\\\src\\\\page\\\\LoginPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../context/authContext\";\nimport { Link } from \"react-router-dom\";\nimport { motion } from \"framer-motion\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginPage = () => {\n  _s();\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [errors, setErrors] = useState({\n    email: \"\",\n    password: \"\",\n    server: \"\"\n  });\n  const navigate = useNavigate();\n  const {\n    login\n  } = useAuth();\n\n  const validateEmail = email => {\n    const trimmedEmail = email.trim();\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n    if (!trimmedEmail) return \"Email is required\";\n    if (!emailRegex.test(trimmedEmail)) return \"Please enter a valid email address\";\n    return \"\";\n  };\n\n  const validatePassword = password => {\n    // Relaxed validation for debugging; adjust as needed\n    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[A-Za-z\\d@$!%*?&]{8,}$/;\n    if (!password) return \"Password is required\";\n    if (!passwordRegex.test(password)) return \"Password must be 8+ characters with uppercase, lowercase, and a number\";\n    return \"\";\n  };\n\n  const handleEmailChange = e => {\n    setEmail(e.target.value);\n    setErrors(prev => ({ ...prev,\n      email: \"\",\n      server: \"\"\n    }));\n  };\n\n  const handlePasswordChange = e => {\n    const newPassword = e.target.value;\n    console.log(\"Password input:\", newPassword);\n    setPassword(newPassword);\n    setErrors(prev => ({ ...prev,\n      password: \"\",\n      server: \"\"\n    }));\n  };\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    console.log(\"Submitting with password:\", password);\n    const emailError = validateEmail(email);\n    const passwordError = validatePassword(password);\n\n    if (emailError || passwordError) {\n      setErrors({\n        email: emailError,\n        password: passwordError,\n        server: \"\"\n      });\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      console.log(\"Sending to server:\", {\n        email: email.trim().toLowerCase(),\n        password\n      });\n      const response = await fetch(\"http://localhost:5000/auth/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email: email.trim().toLowerCase(),\n          password\n        })\n      });\n\n      if (response.ok) {\n        const data = await response.json();\n        console.log(\"Login successful, token:\", data.token);\n        localStorage.setItem(\"authToken\", data.token);\n        login();\n        navigate(\"/home\");\n      } else {\n        const errorData = await response.json();\n        console.log(\"Server rejected password:\", errorData);\n        setErrors(prev => ({ ...prev,\n          server: errorData.message || \"Invalid credentials\"\n        }));\n      }\n    } catch (err) {\n      console.error(\"Fetch error:\", err);\n      setErrors(prev => ({ ...prev,\n        server: \"An error occurred. Please try again.\"\n      }));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"is-flex is-justify-content-center is-align-items-center\",\n    style: {\n      height: \"100vh\",\n      background: `url('/loginBanner.jpg') center/cover no-repeat`\n    },\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        scale: 0.9\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        duration: 0.5\n      },\n      className: \"box\",\n      style: {\n        maxWidth: \"400px\",\n        width: \"100%\",\n        padding: \"2rem\",\n        borderRadius: \"12px\",\n        boxShadow: \"0 8px 30px rgba(0,0,0,0.2)\",\n        backgroundColor: \"rgba(255, 255, 255, 0.85)\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(motion.h2, {\n        className: \"title is-5 has-text-centered has-text-weight-bold\",\n        initial: {\n          opacity: 0,\n          y: -10\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          duration: 0.4\n        },\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        noValidate: true,\n        children: /*#__PURE__*/_jsxDEV(motion.div, {\n          initial: {\n            opacity: 0\n          },\n          animate: {\n            opacity: 1\n          },\n          transition: {\n            delay: 0.2\n          },\n          children: [errors.server && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"help is-danger has-text-centered\",\n            id: \"server-error\",\n            children: errors.server\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label has-text-weight-medium\",\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"email\",\n                className: `input is-medium ${errors.email ? \"is-danger\" : \"\"}`,\n                value: email,\n                onChange: handleEmailChange,\n                onBlur: () => setErrors(prev => ({ ...prev,\n                  email: validateEmail(email)\n                })),\n                placeholder: \"Enter your email\",\n                style: {\n                  borderRadius: \"8px\"\n                },\n                \"aria-invalid\": !!errors.email,\n                \"aria-describedby\": \"email-error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 15\n            }, this), errors.email && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"help is-danger\",\n              id: \"email-error\",\n              children: errors.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"label has-text-weight-medium\",\n              children: \"Password:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"password\",\n                className: `input is-medium ${errors.password ? \"is-danger\" : \"\"}`,\n                value: password,\n                onChange: handlePasswordChange,\n                onBlur: () => {\n                  console.log(\"Password blurred:\", password);\n                  setErrors(prev => ({ ...prev,\n                    password: validatePassword(password)\n                  }));\n                },\n                placeholder: \"Enter your password\",\n                style: {\n                  borderRadius: \"8px\"\n                },\n                \"aria-invalid\": !!errors.password,\n                \"aria-describedby\": \"password-error\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), errors.password && /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"help is-danger\",\n              id: \"password-error\",\n              children: errors.password\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"field\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"control\",\n              children: /*#__PURE__*/_jsxDEV(motion.button, {\n                type: \"submit\",\n                className: `button is-primary is-fullwidth is-medium ${loading ? \"is-loading\" : \"\"}`,\n                style: {\n                  borderRadius: \"8px\",\n                  backgroundColor: \"#4c7dff\",\n                  borderColor: \"#4c7dff\",\n                  transition: \"background-color 0.3s\"\n                },\n                whileHover: {\n                  scale: 1.03\n                },\n                whileTap: {\n                  scale: 0.95\n                },\n                disabled: loading,\n                children: \"Sign In\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(motion.div, {\n        className: \"has-text-centered\",\n        style: {\n          marginTop: \"1rem\"\n        },\n        initial: {\n          opacity: 0\n        },\n        animate: {\n          opacity: 1\n        },\n        transition: {\n          delay: 0.3\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgot-password\",\n            className: \"has-text-link\",\n            children: \"Forgot Password?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 203,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          style: {\n            marginTop: \"0.5rem\"\n          },\n          children: [\"Don\\u2019t have an account?\", \" \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            className: \"has-text-link\",\n            children: \"Sign Up here\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LoginPage, \"BQB54MAkGPfxjS7wNAjEHUaCa54=\", false, function () {\n  return [useNavigate, useAuth];\n});\n\n_c = LoginPage;\nexport default LoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"sources":["C:/Users/PC/Documents/PROGRAMMING/New folder/MERN-BF/frontend/src/page/LoginPage.js"],"names":["React","useState","useNavigate","useAuth","Link","motion","LoginPage","email","setEmail","password","setPassword","loading","setLoading","errors","setErrors","server","navigate","login","validateEmail","trimmedEmail","trim","emailRegex","test","validatePassword","passwordRegex","handleEmailChange","e","target","value","prev","handlePasswordChange","newPassword","console","log","handleSubmit","preventDefault","emailError","passwordError","toLowerCase","response","fetch","method","headers","body","JSON","stringify","ok","data","json","token","localStorage","setItem","errorData","message","err","error","height","background","opacity","scale","duration","maxWidth","width","padding","borderRadius","boxShadow","backgroundColor","y","delay","borderColor","transition","marginTop"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,OAAT,QAAwB,wBAAxB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,MAAT,QAAuB,eAAvB;;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AACtB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BT,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACU,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACY,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC;AAAEM,IAAAA,KAAK,EAAE,EAAT;AAAaE,IAAAA,QAAQ,EAAE,EAAvB;AAA2BM,IAAAA,MAAM,EAAE;AAAnC,GAAD,CAApC;AACA,QAAMC,QAAQ,GAAGd,WAAW,EAA5B;AACA,QAAM;AAAEe,IAAAA;AAAF,MAAYd,OAAO,EAAzB;;AAEA,QAAMe,aAAa,GAAIX,KAAD,IAAW;AAC/B,UAAMY,YAAY,GAAGZ,KAAK,CAACa,IAAN,EAArB;AACA,UAAMC,UAAU,GAAG,4BAAnB;AACA,QAAI,CAACF,YAAL,EAAmB,OAAO,mBAAP;AACnB,QAAI,CAACE,UAAU,CAACC,IAAX,CAAgBH,YAAhB,CAAL,EAAoC,OAAO,oCAAP;AACpC,WAAO,EAAP;AACD,GAND;;AAQA,QAAMI,gBAAgB,GAAId,QAAD,IAAc;AACrC;AACA,UAAMe,aAAa,GAAG,uDAAtB;AACA,QAAI,CAACf,QAAL,EAAe,OAAO,sBAAP;AACf,QAAI,CAACe,aAAa,CAACF,IAAd,CAAmBb,QAAnB,CAAL,EACE,OAAO,wEAAP;AACF,WAAO,EAAP;AACD,GAPD;;AASA,QAAMgB,iBAAiB,GAAIC,CAAD,IAAO;AAC/BlB,IAAAA,QAAQ,CAACkB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR;AACAd,IAAAA,SAAS,CAAEe,IAAD,KAAW,EAAE,GAAGA,IAAL;AAAWtB,MAAAA,KAAK,EAAE,EAAlB;AAAsBQ,MAAAA,MAAM,EAAE;AAA9B,KAAX,CAAD,CAAT;AACD,GAHD;;AAKA,QAAMe,oBAAoB,GAAIJ,CAAD,IAAO;AAClC,UAAMK,WAAW,GAAGL,CAAC,CAACC,MAAF,CAASC,KAA7B;AACAI,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BF,WAA/B;AACArB,IAAAA,WAAW,CAACqB,WAAD,CAAX;AACAjB,IAAAA,SAAS,CAAEe,IAAD,KAAW,EAAE,GAAGA,IAAL;AAAWpB,MAAAA,QAAQ,EAAE,EAArB;AAAyBM,MAAAA,MAAM,EAAE;AAAjC,KAAX,CAAD,CAAT;AACD,GALD;;AAOA,QAAMmB,YAAY,GAAG,MAAOR,CAAP,IAAa;AAChCA,IAAAA,CAAC,CAACS,cAAF;AACAH,IAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCxB,QAAzC;AAEA,UAAM2B,UAAU,GAAGlB,aAAa,CAACX,KAAD,CAAhC;AACA,UAAM8B,aAAa,GAAGd,gBAAgB,CAACd,QAAD,CAAtC;;AAEA,QAAI2B,UAAU,IAAIC,aAAlB,EAAiC;AAC/BvB,MAAAA,SAAS,CAAC;AAAEP,QAAAA,KAAK,EAAE6B,UAAT;AAAqB3B,QAAAA,QAAQ,EAAE4B,aAA/B;AAA8CtB,QAAAA,MAAM,EAAE;AAAtD,OAAD,CAAT;AACA;AACD;;AAEDH,IAAAA,UAAU,CAAC,IAAD,CAAV;;AAEA,QAAI;AACFoB,MAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkC;AAAE1B,QAAAA,KAAK,EAAEA,KAAK,CAACa,IAAN,GAAakB,WAAb,EAAT;AAAqC7B,QAAAA;AAArC,OAAlC;AACA,YAAM8B,QAAQ,GAAG,MAAMC,KAAK,CAAC,kCAAD,EAAqC;AAC/DC,QAAAA,MAAM,EAAE,MADuD;AAE/DC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFsD;AAG/DC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEtC,UAAAA,KAAK,EAAEA,KAAK,CAACa,IAAN,GAAakB,WAAb,EAAT;AAAqC7B,UAAAA;AAArC,SAAf;AAHyD,OAArC,CAA5B;;AAMA,UAAI8B,QAAQ,CAACO,EAAb,EAAiB;AACf,cAAMC,IAAI,GAAG,MAAMR,QAAQ,CAACS,IAAT,EAAnB;AACAhB,QAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCc,IAAI,CAACE,KAA7C;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCJ,IAAI,CAACE,KAAvC;AACAhC,QAAAA,KAAK;AACLD,QAAAA,QAAQ,CAAC,OAAD,CAAR;AACD,OAND,MAMO;AACL,cAAMoC,SAAS,GAAG,MAAMb,QAAQ,CAACS,IAAT,EAAxB;AACAhB,QAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ,EAAyCmB,SAAzC;AACAtC,QAAAA,SAAS,CAAEe,IAAD,KAAW,EACnB,GAAGA,IADgB;AAEnBd,UAAAA,MAAM,EAAEqC,SAAS,CAACC,OAAV,IAAqB;AAFV,SAAX,CAAD,CAAT;AAID;AACF,KAtBD,CAsBE,OAAOC,GAAP,EAAY;AACZtB,MAAAA,OAAO,CAACuB,KAAR,CAAc,cAAd,EAA8BD,GAA9B;AACAxC,MAAAA,SAAS,CAAEe,IAAD,KAAW,EACnB,GAAGA,IADgB;AAEnBd,QAAAA,MAAM,EAAE;AAFW,OAAX,CAAD,CAAT;AAID,KA5BD,SA4BU;AACRH,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,GA7CD;;AA+CA,sBACE;AACE,IAAA,SAAS,EAAC,yDADZ;AAEE,IAAA,KAAK,EAAE;AACL4C,MAAAA,MAAM,EAAE,OADH;AAELC,MAAAA,UAAU,EAAG;AAFR,KAFT;AAAA,2BAOE,QAAC,MAAD,CAAQ,GAAR;AACE,MAAA,OAAO,EAAE;AAAEC,QAAAA,OAAO,EAAE,CAAX;AAAcC,QAAAA,KAAK,EAAE;AAArB,OADX;AAEE,MAAA,OAAO,EAAE;AAAED,QAAAA,OAAO,EAAE,CAAX;AAAcC,QAAAA,KAAK,EAAE;AAArB,OAFX;AAGE,MAAA,UAAU,EAAE;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAHd;AAIE,MAAA,SAAS,EAAC,KAJZ;AAKE,MAAA,KAAK,EAAE;AACLC,QAAAA,QAAQ,EAAE,OADL;AAELC,QAAAA,KAAK,EAAE,MAFF;AAGLC,QAAAA,OAAO,EAAE,MAHJ;AAILC,QAAAA,YAAY,EAAE,MAJT;AAKLC,QAAAA,SAAS,EAAE,4BALN;AAMLC,QAAAA,eAAe,EAAE;AANZ,OALT;AAAA,8BAcE,QAAC,MAAD,CAAQ,EAAR;AACE,QAAA,SAAS,EAAC,mDADZ;AAEE,QAAA,OAAO,EAAE;AAAER,UAAAA,OAAO,EAAE,CAAX;AAAcS,UAAAA,CAAC,EAAE,CAAC;AAAlB,SAFX;AAGE,QAAA,OAAO,EAAE;AAAET,UAAAA,OAAO,EAAE,CAAX;AAAcS,UAAAA,CAAC,EAAE;AAAjB,SAHX;AAIE,QAAA,UAAU,EAAE;AAAEP,UAAAA,QAAQ,EAAE;AAAZ,SAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAdF,eAuBE;AAAM,QAAA,QAAQ,EAAE1B,YAAhB;AAA8B,QAAA,UAAU,MAAxC;AAAA,+BACE,QAAC,MAAD,CAAQ,GAAR;AAAY,UAAA,OAAO,EAAE;AAAEwB,YAAAA,OAAO,EAAE;AAAX,WAArB;AAAqC,UAAA,OAAO,EAAE;AAAEA,YAAAA,OAAO,EAAE;AAAX,WAA9C;AAA8D,UAAA,UAAU,EAAE;AAAEU,YAAAA,KAAK,EAAE;AAAT,WAA1E;AAAA,qBACGvD,MAAM,CAACE,MAAP,iBACC;AAAG,YAAA,SAAS,EAAC,kCAAb;AAAgD,YAAA,EAAE,EAAC,cAAnD;AAAA,sBACGF,MAAM,CAACE;AADV;AAAA;AAAA;AAAA;AAAA,kBAFJ,eAOE;AAAK,YAAA,SAAS,EAAC,OAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,8BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAK,cAAA,SAAS,EAAC,SAAf;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,OADP;AAEE,gBAAA,SAAS,EAAG,mBAAkBF,MAAM,CAACN,KAAP,GAAe,WAAf,GAA6B,EAAG,EAFhE;AAGE,gBAAA,KAAK,EAAEA,KAHT;AAIE,gBAAA,QAAQ,EAAEkB,iBAJZ;AAKE,gBAAA,MAAM,EAAE,MAAMX,SAAS,CAAEe,IAAD,KAAW,EAAE,GAAGA,IAAL;AAAWtB,kBAAAA,KAAK,EAAEW,aAAa,CAACX,KAAD;AAA/B,iBAAX,CAAD,CALzB;AAME,gBAAA,WAAW,EAAC,kBANd;AAOE,gBAAA,KAAK,EAAE;AAAEyD,kBAAAA,YAAY,EAAE;AAAhB,iBAPT;AAQE,gCAAc,CAAC,CAACnD,MAAM,CAACN,KARzB;AASE,oCAAiB;AATnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAFF,EAeGM,MAAM,CAACN,KAAP,iBACC;AAAG,cAAA,SAAS,EAAC,gBAAb;AAA8B,cAAA,EAAE,EAAC,aAAjC;AAAA,wBAAgDM,MAAM,CAACN;AAAvD;AAAA;AAAA;AAAA;AAAA,oBAhBJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF,eA2BE;AAAK,YAAA,SAAS,EAAC,OAAf;AAAA,oCACE;AAAO,cAAA,SAAS,EAAC,8BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAK,cAAA,SAAS,EAAC,SAAf;AAAA,qCACE;AACE,gBAAA,IAAI,EAAC,UADP;AAEE,gBAAA,SAAS,EAAG,mBAAkBM,MAAM,CAACJ,QAAP,GAAkB,WAAlB,GAAgC,EAAG,EAFnE;AAGE,gBAAA,KAAK,EAAEA,QAHT;AAIE,gBAAA,QAAQ,EAAEqB,oBAJZ;AAKE,gBAAA,MAAM,EAAE,MAAM;AACZE,kBAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCxB,QAAjC;AACAK,kBAAAA,SAAS,CAAEe,IAAD,KAAW,EAAE,GAAGA,IAAL;AAAWpB,oBAAAA,QAAQ,EAAEc,gBAAgB,CAACd,QAAD;AAArC,mBAAX,CAAD,CAAT;AACD,iBARH;AASE,gBAAA,WAAW,EAAC,qBATd;AAUE,gBAAA,KAAK,EAAE;AAAEuD,kBAAAA,YAAY,EAAE;AAAhB,iBAVT;AAWE,gCAAc,CAAC,CAACnD,MAAM,CAACJ,QAXzB;AAYE,oCAAiB;AAZnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBAFF,EAkBGI,MAAM,CAACJ,QAAP,iBACC;AAAG,cAAA,SAAS,EAAC,gBAAb;AAA8B,cAAA,EAAE,EAAC,gBAAjC;AAAA,wBAAmDI,MAAM,CAACJ;AAA1D;AAAA;AAAA;AAAA;AAAA,oBAnBJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBA3BF,eAkDE;AAAK,YAAA,SAAS,EAAC,OAAf;AAAA,mCACE;AAAK,cAAA,SAAS,EAAC,SAAf;AAAA,qCACE,QAAC,MAAD,CAAQ,MAAR;AACE,gBAAA,IAAI,EAAC,QADP;AAEE,gBAAA,SAAS,EAAG,4CAA2CE,OAAO,GAAG,YAAH,GAAkB,EAAG,EAFrF;AAGE,gBAAA,KAAK,EAAE;AACLqD,kBAAAA,YAAY,EAAE,KADT;AAELE,kBAAAA,eAAe,EAAE,SAFZ;AAGLG,kBAAAA,WAAW,EAAE,SAHR;AAILC,kBAAAA,UAAU,EAAE;AAJP,iBAHT;AASE,gBAAA,UAAU,EAAE;AAAEX,kBAAAA,KAAK,EAAE;AAAT,iBATd;AAUE,gBAAA,QAAQ,EAAE;AAAEA,kBAAAA,KAAK,EAAE;AAAT,iBAVZ;AAWE,gBAAA,QAAQ,EAAEhD,OAXZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBAlDF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAvBF,eAgGE,QAAC,MAAD,CAAQ,GAAR;AACE,QAAA,SAAS,EAAC,mBADZ;AAEE,QAAA,KAAK,EAAE;AAAE4D,UAAAA,SAAS,EAAE;AAAb,SAFT;AAGE,QAAA,OAAO,EAAE;AAAEb,UAAAA,OAAO,EAAE;AAAX,SAHX;AAIE,QAAA,OAAO,EAAE;AAAEA,UAAAA,OAAO,EAAE;AAAX,SAJX;AAKE,QAAA,UAAU,EAAE;AAAEU,UAAAA,KAAK,EAAE;AAAT,SALd;AAAA,gCAOE;AAAA,iCACE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,kBAAT;AAA4B,YAAA,SAAS,EAAC,eAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBAPF,eAYE;AAAG,UAAA,KAAK,EAAE;AAAEG,YAAAA,SAAS,EAAE;AAAb,WAAV;AAAA,oDACyB,GADzB,eAEE,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,WAAT;AAAqB,YAAA,SAAS,EAAC,eAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAZF;AAAA;AAAA;AAAA;AAAA;AAAA,cAhGF;AAAA;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,UADF;AA8HD,CAlND;;GAAMjE,S;UAKaJ,W,EACCC,O;;;KANdG,S;AAoNN,eAAeA,SAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAuth } from \"../context/authContext\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst LoginPage = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({ email: \"\", password: \"\", server: \"\" });\r\n  const navigate = useNavigate();\r\n  const { login } = useAuth();\r\n\r\n  const validateEmail = (email) => {\r\n    const trimmedEmail = email.trim();\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    if (!trimmedEmail) return \"Email is required\";\r\n    if (!emailRegex.test(trimmedEmail)) return \"Please enter a valid email address\";\r\n    return \"\";\r\n  };\r\n\r\n  const validatePassword = (password) => {\r\n    // Relaxed validation for debugging; adjust as needed\r\n    const passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[A-Za-z\\d@$!%*?&]{8,}$/;\r\n    if (!password) return \"Password is required\";\r\n    if (!passwordRegex.test(password))\r\n      return \"Password must be 8+ characters with uppercase, lowercase, and a number\";\r\n    return \"\";\r\n  };\r\n\r\n  const handleEmailChange = (e) => {\r\n    setEmail(e.target.value);\r\n    setErrors((prev) => ({ ...prev, email: \"\", server: \"\" }));\r\n  };\r\n\r\n  const handlePasswordChange = (e) => {\r\n    const newPassword = e.target.value;\r\n    console.log(\"Password input:\", newPassword);\r\n    setPassword(newPassword);\r\n    setErrors((prev) => ({ ...prev, password: \"\", server: \"\" }));\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Submitting with password:\", password);\r\n\r\n    const emailError = validateEmail(email);\r\n    const passwordError = validatePassword(password);\r\n\r\n    if (emailError || passwordError) {\r\n      setErrors({ email: emailError, password: passwordError, server: \"\" });\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      console.log(\"Sending to server:\", { email: email.trim().toLowerCase(), password });\r\n      const response = await fetch(\"http://localhost:5000/auth/login\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email: email.trim().toLowerCase(), password }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        console.log(\"Login successful, token:\", data.token);\r\n        localStorage.setItem(\"authToken\", data.token);\r\n        login();\r\n        navigate(\"/home\");\r\n      } else {\r\n        const errorData = await response.json();\r\n        console.log(\"Server rejected password:\", errorData);\r\n        setErrors((prev) => ({\r\n          ...prev,\r\n          server: errorData.message || \"Invalid credentials\",\r\n        }));\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Fetch error:\", err);\r\n      setErrors((prev) => ({\r\n        ...prev,\r\n        server: \"An error occurred. Please try again.\",\r\n      }));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"is-flex is-justify-content-center is-align-items-center\"\r\n      style={{\r\n        height: \"100vh\",\r\n        background: `url('/loginBanner.jpg') center/cover no-repeat`,\r\n      }}\r\n    >\r\n      <motion.div\r\n        initial={{ opacity: 0, scale: 0.9 }}\r\n        animate={{ opacity: 1, scale: 1 }}\r\n        transition={{ duration: 0.5 }}\r\n        className=\"box\"\r\n        style={{\r\n          maxWidth: \"400px\",\r\n          width: \"100%\",\r\n          padding: \"2rem\",\r\n          borderRadius: \"12px\",\r\n          boxShadow: \"0 8px 30px rgba(0,0,0,0.2)\",\r\n          backgroundColor: \"rgba(255, 255, 255, 0.85)\",\r\n        }}\r\n      >\r\n        <motion.h2\r\n          className=\"title is-5 has-text-centered has-text-weight-bold\"\r\n          initial={{ opacity: 0, y: -10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 0.4 }}\r\n        >\r\n          Sign In\r\n        </motion.h2>\r\n\r\n        <form onSubmit={handleSubmit} noValidate>\r\n          <motion.div initial={{ opacity: 0 }} animate={{ opacity: 1 }} transition={{ delay: 0.2 }}>\r\n            {errors.server && (\r\n              <p className=\"help is-danger has-text-centered\" id=\"server-error\">\r\n                {errors.server}\r\n              </p>\r\n            )}\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label has-text-weight-medium\">Email:</label>\r\n              <div className=\"control\">\r\n                <input\r\n                  type=\"email\"\r\n                  className={`input is-medium ${errors.email ? \"is-danger\" : \"\"}`}\r\n                  value={email}\r\n                  onChange={handleEmailChange}\r\n                  onBlur={() => setErrors((prev) => ({ ...prev, email: validateEmail(email) }))}\r\n                  placeholder=\"Enter your email\"\r\n                  style={{ borderRadius: \"8px\" }}\r\n                  aria-invalid={!!errors.email}\r\n                  aria-describedby=\"email-error\"\r\n                />\r\n              </div>\r\n              {errors.email && (\r\n                <p className=\"help is-danger\" id=\"email-error\">{errors.email}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <label className=\"label has-text-weight-medium\">Password:</label>\r\n              <div className=\"control\">\r\n                <input\r\n                  type=\"password\"\r\n                  className={`input is-medium ${errors.password ? \"is-danger\" : \"\"}`}\r\n                  value={password}\r\n                  onChange={handlePasswordChange}\r\n                  onBlur={() => {\r\n                    console.log(\"Password blurred:\", password);\r\n                    setErrors((prev) => ({ ...prev, password: validatePassword(password) }));\r\n                  }}\r\n                  placeholder=\"Enter your password\"\r\n                  style={{ borderRadius: \"8px\" }}\r\n                  aria-invalid={!!errors.password}\r\n                  aria-describedby=\"password-error\"\r\n                />\r\n              </div>\r\n              {errors.password && (\r\n                <p className=\"help is-danger\" id=\"password-error\">{errors.password}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"field\">\r\n              <div className=\"control\">\r\n                <motion.button\r\n                  type=\"submit\"\r\n                  className={`button is-primary is-fullwidth is-medium ${loading ? \"is-loading\" : \"\"}`}\r\n                  style={{\r\n                    borderRadius: \"8px\",\r\n                    backgroundColor: \"#4c7dff\",\r\n                    borderColor: \"#4c7dff\",\r\n                    transition: \"background-color 0.3s\",\r\n                  }}\r\n                  whileHover={{ scale: 1.03 }}\r\n                  whileTap={{ scale: 0.95 }}\r\n                  disabled={loading}\r\n                >\r\n                  Sign In\r\n                </motion.button>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </form>\r\n\r\n        <motion.div\r\n          className=\"has-text-centered\"\r\n          style={{ marginTop: \"1rem\" }}\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          transition={{ delay: 0.3 }}\r\n        >\r\n          <p>\r\n            <Link to=\"/forgot-password\" className=\"has-text-link\">\r\n              Forgot Password?\r\n            </Link>\r\n          </p>\r\n          <p style={{ marginTop: \"0.5rem\" }}>\r\n            Donâ€™t have an account?{\" \"}\r\n            <Link to=\"/register\" className=\"has-text-link\">\r\n              Sign Up here\r\n            </Link>\r\n          </p>\r\n        </motion.div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;\r\n"]},"metadata":{},"sourceType":"module"}